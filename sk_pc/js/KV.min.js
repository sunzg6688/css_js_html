function KV(t,i){this.kvId=t+"_kv";this.kvContainer=t+"_kv_container";this.iconList=t+"_kv_icons";this.iconItem=t+"_kv_icon";if(i){this.currentIndex=i}else{this.currentIndex=0}this.gotoIndex=1;this.num=$("."+t+"_kvItem").length;this.spaceTime=5e3;this.animateTime=1e3;this.timerId;this.isAnimate=false;this.width;this.height;var e=this;this.init=function(){$("#"+this.kvId+this.currentIndex).show();this.createIcons()};this.resize=function(){this.width=$("#"+this.kvContainer).width();this.height=$("#"+this.kvContainer).height()};this.createIcons=function(){var t=$("<div></div>");t.attr("id",this.iconList);for(var i=0;i<this.num;i++){var e=$("<div></div>");if(i==this.currentIndex){var s=this.kvId+"_s";e.addClass(s)}else{var n=this.kvId+"_u";e.addClass(n)}e.addClass("index_kv_icon");t.append(e)}if(this.num==1){t.hide()}t.width(this.num*30);$("#"+this.kvContainer).append(t);setTimeout(this.addIconEvent,100)};this.addIconEvent=function(){$("."+e.iconItem).each(function(){var t=$(this).index();$(this).click(function(){if(e.isAnimate)return;e.goto(t)});if($(this).index()==e.currentIndex){$(this).removeClass(e.kvId+"_u");$(this).addClass(e.kvId+"_s")}else{$(this).removeClass(e.kvId+"_s");$(this).addClass(e.kvId+"_u")}});e.timerId=setTimeout(e.autoLoop,e.spaceTime)};this.autoLoop=function(){if(e.isAnimate)return;var t;if(e.currentIndex<e.num-1){t=e.currentIndex+1}else{t=0}e.goto(t)};this.goto=function(t){if(this.timerId)clearTimeout(this.timerId);if(this.isAnimate)return;this.isAnimate=true;this.resize();this.gotoIndex=t;if(t>this.currentIndex){$("#"+this.kvId+t).css("left",this.width);$("#"+this.kvId+t).show();$("#"+this.kvId+t).animate({left:0},this.animateTime);$("#"+this.kvId+this.currentIndex).animate({left:-this.width},this.animateTime,function(){$("#"+e.kvId+e.currentIndex).hide();e.animateComplete()})}else if(t<this.currentIndex){$("#"+this.kvId+t).css("left",-this.width);$("#"+this.kvId+t).show();$("#"+this.kvId+t).animate({left:0},this.animateTime);$("#"+this.kvId+this.currentIndex).animate({left:this.width},this.animateTime,function(){$("#"+e.kvId+e.currentIndex).hide();e.animateComplete()})}else{$("#"+this.kvId+t).css("left",0);$("#"+this.kvId+t).show();e.animateComplete()}};this.animateComplete=function(){this.currentIndex=this.gotoIndex;this.isAnimate=false;$("."+this.iconItem).each(function(){if($(this).index()==e.currentIndex){$(this).removeClass(e.kvId+"_u");$(this).addClass(e.kvId+"_s")}else{$(this).removeClass(e.kvId+"_s");$(this).addClass(e.kvId+"_u")}});this.timerId=setTimeout(e.autoLoop,e.spaceTime)}}